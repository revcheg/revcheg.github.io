const BODY=document.querySelector(".body"),VIDEO=document.querySelector(".video"),STATISTICS=document.querySelector(".statistics"),VIDEORANGE=document.querySelector(".control__range"),STARTBUTTON=document.querySelector(".video__start"),CONTROLS=document.querySelector(".control"),playButtonIcon=document.querySelector(".control__icon--play"),pauseButtonIcon=document.querySelector(".control__icon--pause");document.querySelector(".control__button--play").addEventListener("click",(function(){playButtonIcon.classList.toggle("control__icon--hide"),pauseButtonIcon.classList.toggle("control__icon--hide"),VIDEO.paused?VIDEO.play():VIDEO.pause()}));const muteButton=document.querySelector(".control__button--volume"),muteButtonIcon=document.querySelector(".control__mute");let FILE,FILETYPE,FILEURL,game,videoWidth,videoHeight,videoFormat,videoDuration,videoBuffer,videoCurrentTime;function resetVideo(){VIDEO.pause(),STARTBUTTON.classList.remove("video__start--hide"),CONTROLS.classList.add("control--hide"),STATISTICS.classList.add("statistics--hide"),playButtonIcon.classList.add("control__icon--hide"),pauseButtonIcon.classList.remove("control__icon--hide")}muteButton.addEventListener("click",(function(){muteButtonIcon.classList.toggle("control__mute"),VIDEO.muted?VIDEO.muted=!1:VIDEO.muted=!0})),function(){let e;VIDEORANGE.addEventListener("mousedown",(function(){VIDEO.pause()})),VIDEORANGE.addEventListener("change",(function(){VIDEO.pause(),e=VIDEORANGE.value,VIDEO.currentTime=e,VIDEO.play()}))}(),document.querySelector(".control__button--size").addEventListener("click",(function(){VIDEO.requestFullscreen()})),VIDEO.addEventListener("keyup",(e=>{switch(e.key){case" ":VIDEO.paused?(VIDEO.play(),playButtonIcon.classList.add("control__icon--hide"),pauseButtonIcon.classList.remove("control__icon--hide")):(VIDEO.pause(),playButtonIcon.classList.remove("control__icon--hide"),pauseButtonIcon.classList.add("control__icon--hide"));break;case"ArrowLeft":VIDEO.currentTime-=5;break;case"ArrowRight":VIDEO.currentTime+=5;break;case"ArrowUp":VIDEO.volume+=.1,console.log(VIDEO.volume);break;case"ArrowDown":VIDEO.volume-=.1,console.log(VIDEO.volume);break;case"m":VIDEO.muted?(VIDEO.muted=!1,muteButtonIcon.classList.add("control__mute")):(VIDEO.muted=!0,muteButtonIcon.classList.remove("control__mute"));break;case"f":VIDEO.requestFullscreen()}})),function(){const e=document.querySelector(".settings__file");e.addEventListener("click",(function(){resetVideo()})),e.addEventListener("change",(function(){FILE=e.files[0],FILEURL=URL.createObjectURL(FILE),FILETYPE=e.files[0].type,VIDEO.src=FILEURL}))}(),function(){function e(){t?(VIDEO.src="video/"+game+"/deep.webm",VIDEO.poster="img/"+game+"/deep-preview.webp"):(VIDEO.src="video/"+game+"/main.webm",VIDEO.poster="img/"+game+"/main-preview.webp"),VIDEO.preload="auto"}document.querySelectorAll(".settings__button").forEach((t=>{t.addEventListener("click",(function(){game=this.getAttribute("data-video"),resetVideo(),e(),o.removeAttribute("disabled","disabled")}))}));let t,o=document.querySelector(".settings__checkbox--deep");o.addEventListener("change",(function(o){t=!!o.currentTarget.checked,e()}))}(),function(){const e=document.querySelector(".settings"),t=document.querySelector(".header__menu"),o=document.querySelector(".settings__close");t.addEventListener("click",(()=>{e.classList.remove("settings--hide"),e.focus()})),o.addEventListener("click",(()=>{e.classList.add("settings--hide"),e.blur()})),e.addEventListener("keyup",(t=>{"Escape"===t.key&&e.classList.add("settings--hide")}))}(),function(){const e=document.querySelector(".header__menu");STARTBUTTON.addEventListener("click",(function(){VIDEO.src?(e.classList.remove("header__menu--error"),STARTBUTTON.classList.add("video__start--hide"),CONTROLS.classList.remove("control--hide"),getStatistics(),VIDEO.volume=.5,VIDEO.play(),VIDEO.focus()):e.classList.add("header__menu--error")})),VIDEO.addEventListener("ended",(function(){STARTBUTTON.classList.remove("video__start--hide"),CONTROLS.classList.add("control--hide"),STATISTICS.classList.add("statistics--hide")})),VIDEO.addEventListener("blur",(function(){VIDEO.focus()}))}(),document.querySelector(".settings__checkbox--statistics").addEventListener("change",(function(e){e.currentTarget.checked?STATISTICS.classList.remove("statistics--off"):STATISTICS.classList.add("statistics--off")}));const statisticsResolution=STATISTICS.querySelector(".statistics__resolution"),statisticsFormat=STATISTICS.querySelector(".statistics__format"),statisticsDuration=STATISTICS.querySelector(".statistics__duration"),statisticsBuffer=STATISTICS.querySelector(".statistics__buffer");function getStatistics(){STATISTICS.classList.remove("statistics--hide"),videoFormat=FILETYPE||VIDEO.src.split(".").pop(),videoWidth=VIDEO.videoWidth,videoHeight=VIDEO.videoHeight,videoDuration=Math.round(VIDEO.duration),VIDEORANGE.setAttribute("max",videoDuration),setStatistics()}function setStatistics(){statisticsResolution.innerHTML=videoWidth+"x"+videoHeight,statisticsFormat.innerHTML=videoFormat,statisticsDuration.innerHTML=videoDuration,VIDEO.addEventListener("timeupdate",(function(){videoBuffer=Math.round(VIDEO.buffered.end(0)),videoCurrentTime=VIDEO.currentTime,VIDEORANGE.value=videoCurrentTime,statisticsBuffer.innerHTML=videoBuffer}))}let currentTheme,buttonIndex;!function(){const e=document.querySelectorAll(".footer__theme");function t(){e.forEach((e=>{e.removeAttribute("disabled"),e.classList.remove("footer__theme--active")})),e[buttonIndex].setAttribute("disabled","disabled"),e[buttonIndex].classList.add("footer__theme--active")}function o(e){switch(BODY.className="",e){case"light":BODY.classList.add(e),buttonIndex=0;break;case"dark":BODY.classList.add(e),buttonIndex=1;break;case"cyberpunk":BODY.classList.add(e),buttonIndex=2;break;default:BODY.className=""}}currentTheme=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",e.forEach((function(s,n){s.addEventListener("click",(function(){buttonIndex=Array.from(e).indexOf(s),currentTheme=this.getAttribute("data-theme"),t(),o(currentTheme),function(e){localStorage.setItem("localTheme",e),localStorage.setItem("localButton",buttonIndex)}(currentTheme)}))})),o(currentTheme),t(),function(){if(localStorage){const e=localStorage.getItem("localTheme");localStorage.getItem("localButton");o(e),t()}}()}();